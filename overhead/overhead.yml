# running runbms /home/claireh/ebpf/overhead /home/claireh/ebpf/overhead/overhead.yml -p "fixed-overhead" -s 2
includes:
   - "$RUNNING_NG_PACKAGE_DATA/base/runbms.yml"

benchmarks:
  dacapochopin-f480064:
    - cassandra 
    - eclipse
    - fop
    - graphchi
    - h2
    - h2o
    # - jme
    - jython
    - luindex
    - lusearch
    # - pmd
    - sunflow
    - tomcat
    - xalan
    - zxing
    - avrora
    - batik
    - biojava

overrides:
  "suites.dacapochopin-f480064.timing_iteration": 5
  invocations: 20
  "suites.dacapochopin-f480064.callback": "probe.DacapoChopinCallback"
  "suites.dacapochopin-f480064.minheap": GenImmix
  "suites.dacapochopin-f480064.timeout": 1200
  "suites.dacapochopin-f480064.minheap_values.GenImmix": 
    avrora: 8
    batik: 407
    biojava: 196
    cassandra: 120
    eclipse: 722
    fop: 21 #manual
    graphchi: 256 #artificial
    h2: 1242
    h2o: 99
    jme: 236
    jython: 90 #manual
    luindex: 28 #manual
    lusearch: 28
    #pmd: .inf
    sunflow: 29
    tomcat: 51
    xalan: 22
    zxing: 432

runtimes:
  flagged:
    type: OpenJDK
    release: 11
    home: "/home/claireh/openjdk/build/flagged/jdk"
  probed:
    type: OpenJDK
    release: 11
    home: "/home/claireh/openjdk/build/probed/jdk"
  normal:
    type: OpenJDK
    release: 11
    home: "/home/claireh/openjdk/build/normal/jdk"
  stat:
    type: OpenJDK
    release: 11
    home: "/home/claireh/openjdk/build/stat/jdk"

modifiers:
  probes_cp:
    type: JVMClasspath
    val: "/home/claireh/probes /home/claireh/probes.jar"
  probes:
    type: JVMArg
    val: "-Djava.library.path=/home/claireh/probes -Dprobes=RustMMTk"
  gc_threads:
    type: EnvVar
    var: MMTK_THREADS
    val: '{0}'
  bpftrace:
    type: Companion
    val: "sudo /opt/bpftrace/bpftrace-0.16.0-llvm-14 '/home/claireh/ebpf/overhead/tracing.bt'"
  notrace:
    type: Companion
    val: "sudo /opt/bpftrace/bpftrace-0.16.0-llvm-14 '/home/claireh/ebpf/overhead/empty.bt'"
  no_add_rand:
    type: Wrapper
    val: "setarch x86_64 -R"

configs:
  - "probed|ms|s|c2|mmtk_gc-GenImmix|tph|probes_cp|probes|gc_threads-1|notrace"
  - "normal|ms|s|c2|mmtk_gc-GenImmix|tph|probes_cp|probes|gc_threads-1"
  - "flagged|ms|s|c2|mmtk_gc-GenImmix|tph|probes_cp|probes|gc_threads-1"
  - "stat|ms|s|c2|mmtk_gc-GenImmix|tph|probes_cp|probes|gc_threads-1"
  - "probed|ms|s|c2|mmtk_gc-GenImmix|tph|probes_cp|probes|gc_threads-1"
  - "probed|ms|s|c2|mmtk_gc-GenImmix|tph|probes_cp|probes|gc_threads-1|bpftrace|no_add_rand"
  